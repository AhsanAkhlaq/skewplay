import{e as S,u as B,r,f as F,g as P,c as j,b as l,a as t,w as o,F as z,h as A,i as N,o as v,j as U,k as c,d as n,l as x,m as V,t as D}from"./index-B1dst585.js";import{V as G,e as w,b as I,c as R,d as T,a as h}from"./VContainer-ZakoJpiD.js";import{V as M}from"./VForm-BIlyFEE5.js";import{V as k}from"./VTextField-CMDRMWKR.js";import{V as C}from"./VDivider-YL--oiKl.js";import{V as _}from"./VAlert-D1Jesiz8.js";import"./VInput-DG5Lkxtm.js";const W={class:"skew-bg d-flex align-center justify-center",style:{"min-height":"100vh"}},O={class:"text-center mb-6"},$={class:"d-flex justify-center mb-4"},H={class:"d-flex align-center mb-4"},J={class:"text-center text-body-2 text-grey-lighten-1"},ae=S({__name:"LoginView",setup(K){const s=B(),b=A(),m=P(),d=r(!1),p=r(""),g=r(""),u=r(!1),y=r(!1),f={required:a=>!!a||"Field is required",email:a=>/.+@.+\..+/.test(a)||"E-mail must be valid"},q=async()=>{if(d.value)try{await s.login(p.value,g.value);const a=m.query.redirect||"/app/dashboard";b.push(a)}catch{}},E=async()=>{try{await s.loginWithGoogle();const a=m.query.redirect||"/app/dashboard";b.push(a)}catch{}};return F(()=>{m.query.reason==="inactivity"&&(y.value=!0)}),(a,e)=>{const L=N("router-link");return v(),j(z,null,[l("div",W,[t(G,{class:"d-flex justify-center"},{default:o(()=>[t(I,{width:"100%","max-width":"420",class:"glass-card pa-8",elevation:"10"},{default:o(()=>[l("div",O,[l("div",$,[t(R,{color:"primary",variant:"tonal",size:"48"},{default:o(()=>[t(T,{icon:"mdi-account-lock",size:"28",color:"white"})]),_:1})]),e[4]||(e[4]=l("h1",{class:"text-h4 font-weight-bold text-white"},"Welcome back",-1)),e[5]||(e[5]=l("p",{class:"text-body-2 text-grey-lighten-1 mt-2"}," Enter your credentials to access the lab. ",-1))]),t(M,{onSubmit:U(q,["prevent"]),modelValue:d.value,"onUpdate:modelValue":e[3]||(e[3]=i=>d.value=i)},{default:o(()=>[t(k,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=i=>p.value=i),label:"Email Address","prepend-inner-icon":"mdi-email-outline",variant:"outlined","base-color":"white",color:"secondary","bg-color":"rgba(255,255,255,0.05)",rules:[f.required,f.email],class:"mb-2 autofill-dark"},null,8,["modelValue","rules"]),t(k,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=i=>g.value=i),label:"Password",type:u.value?"text":"password","prepend-inner-icon":"mdi-lock-outline","append-inner-icon":u.value?"mdi-eye-off":"mdi-eye","onClick:appendInner":e[2]||(e[2]=i=>u.value=!u.value),variant:"outlined","base-color":"white",color:"secondary","bg-color":"rgba(255,255,255,0.05)",rules:[f.required],class:"mb-6 autofill-dark"},null,8,["modelValue","type","append-inner-icon","rules"]),t(h,{block:"",size:"large",color:"primary",type:"submit",loading:c(s).isLoading,disabled:!d.value,class:"mb-4 text-white font-weight-bold",elevation:"4"},{default:o(()=>[...e[6]||(e[6]=[n(" Log In ",-1)])]),_:1},8,["loading","disabled"])]),_:1},8,["modelValue"]),l("div",H,[t(C,{color:"white",class:"opacity-50"}),e[7]||(e[7]=l("span",{class:"text-caption text-grey-lighten-1 mx-3"},"OR",-1)),t(C,{color:"white",class:"opacity-50"})]),t(h,{block:"",size:"large",variant:"outlined",color:"white","prepend-icon":"mdi-google",loading:c(s).isLoading,onClick:E,class:"mb-6"},{default:o(()=>[...e[8]||(e[8]=[n(" Continue with Google ",-1)])]),_:1},8,["loading"]),t(w,null,{default:o(()=>[c(s).error?(v(),x(_,{key:0,type:"error",variant:"tonal",closable:"",class:"mb-4 text-caption"},{default:o(()=>[n(D(c(s).error),1)]),_:1})):V("",!0)]),_:1}),l("div",J,[e[10]||(e[10]=n(" Don't have an account? ",-1)),t(L,{to:"/register",class:"text-secondary font-weight-bold text-decoration-none ml-1"},{default:o(()=>[...e[9]||(e[9]=[n(" Sign Up ",-1)])]),_:1})])]),_:1})]),_:1})]),t(w,null,{default:o(()=>[y.value?(v(),x(_,{key:0,type:"warning",variant:"tonal",icon:"mdi-clock-alert-outline",class:"mb-6 text-caption",closable:""},{default:o(()=>[...e[11]||(e[11]=[n(" Session expired due to inactivity. Please log in again. ",-1)])]),_:1})):V("",!0)]),_:1})],64)}}});export{ae as default};
