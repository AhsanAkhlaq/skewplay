import{a4 as n,a5 as c,a6 as o,a7 as a,a8 as w,u as r,a9 as l,aa as f,ab as i,ac as h,ad as b,ae as k,af as m}from"./index-BQ-yD8y5.js";const y=n("workflows",{state:()=>({workflows:[],isLoaded:!1,unsubscribe:null}),actions:{async init(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null);const s=r();if(!s.user){this.workflows=[],this.isLoaded=!0;return}const e=h(i(a,"workflows"),k("ownerId","==",s.user.uid),b("createdAt","desc"));this.unsubscribe=m(e,u=>{this.workflows=u.docs.map(t=>{const d=t.data();return{id:t.id,...d}}),this.isLoaded=!0})},async createWorkflow(s){const e=r();e.user&&await l(i(a,"workflows"),{...s,stage:s.stage??"ingest",ownerId:e.user.uid,createdAt:f()})},async updateWorkflow(s,e){await w(o(a,"workflows",s),e)},async deleteWorkflow(s){await c(o(a,"workflows",s))}}});export{y as u};
