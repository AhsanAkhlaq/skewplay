import{e as W,a3 as _,y as N,D as F,g as p,w as a,a as e,d as i,h,t as r,i as z,j as v,c as L,a0 as O,Y as q,o as n,b as c}from"./index-BQ-yD8y5.js";import{u as A}from"./datasets-DP0R_19e.js";import{u as M}from"./workflows-DxC7j1rP.js";import{V as x,a as f}from"./VRow-bIxuAT9F.js";import{V as w,a as C,b as S,c as R,d as $,e as Y}from"./VCard-B5u0R0Bn.js";import{V,p as g}from"./VGrid-WlsQCIUj.js";import{d as j,e as G}from"./VList-DkhENPD5.js";import{V as H}from"./VForm-gjJOfFIx.js";import{V as J}from"./VTextField-C93ZrlTJ.js";import{V as D,a as K}from"./VTextarea-BBlVzAK5.js";import{V as I}from"./VSelect-BPwPp236.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Dy_5GxG7.js";import"./VMenu-CgAHk5IX.js";const Q={class:"d-flex justify-space-between align-start"},X={class:"text-body-2 font-weight-medium"},Z=W({__name:"WorkflowsView",setup(ee){const y=A(),d=M(),l=_({id:"",title:"",objective:"",datasetId:"",stage:"ingest"}),k=[{value:"ingest",label:"Upload"},{value:"analyze",label:"Analyze"},{value:"balance",label:"Balance"},{value:"train",label:"Train"},{value:"evaluate",label:"Evaluate"},{value:"report",label:"Report"}],m=_({}),U=N(()=>y.datasets.map(s=>({title:s.name,value:s.id}))),b=()=>{l.id="",l.title="",l.objective="",l.datasetId="",l.stage="ingest"},T=async()=>{const s={title:l.title,objective:l.objective,datasetId:l.datasetId,stage:l.stage};l.id?await d.updateWorkflow(l.id,s):await d.createWorkflow(s),b()},B=async s=>{await d.updateWorkflow(s,{experimentSummary:m[s]})},E=s=>k.find(t=>t.value===s)?.label??s;return F(()=>d.workflows,s=>{s.forEach(t=>{t.id in m||(m[t.id]=t.experimentSummary??"")})},{immediate:!0}),(s,t)=>(n(),p(x,{class:"ga-6",align:"stretch"},{default:a(()=>[e(f,{cols:"12",md:"4"},{default:a(()=>[e(w,{elevation:"3"},{default:a(()=>[e(C,{class:"d-flex justify-space-between align-center"},{default:a(()=>[i(r(l.id?"Edit workflow":"Create workflow")+" ",1),l.id?(n(),p(V,{key:0,icon:"mdi-close",variant:"text",onClick:b})):h("",!0)]),_:1}),e(j),e(S,null,{default:a(()=>[e(H,{onSubmit:z(T,["prevent"]),class:"d-flex flex-column ga-4"},{default:a(()=>[e(J,{modelValue:l.title,"onUpdate:modelValue":t[0]||(t[0]=o=>l.title=o),label:"Title",placeholder:"SMOTE vs Baseline",required:""},null,8,["modelValue"]),e(D,{modelValue:l.objective,"onUpdate:modelValue":t[1]||(t[1]=o=>l.objective=o),label:"Objective",rows:"3",placeholder:"Describe the aim"},null,8,["modelValue"]),e(I,{modelValue:l.datasetId,"onUpdate:modelValue":t[2]||(t[2]=o=>l.datasetId=o),label:"Dataset",items:U.value,"item-title":"title","item-value":"value",required:""},null,8,["modelValue","items"]),e(I,{modelValue:l.stage,"onUpdate:modelValue":t[3]||(t[3]=o=>l.stage=o),label:"Stage",items:k,"item-title":"label","item-value":"value"},null,8,["modelValue"]),e(V,{type:"submit",color:"primary",size:"large"},{default:a(()=>[e(g,{start:"",icon:"mdi-content-save"}),i(" "+r(l.id?"Update workflow":"Save workflow"),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{cols:"12",md:"8"},{default:a(()=>[v(d).workflows.length?(n(),p(x,{key:0,class:"ga-4"},{default:a(()=>[(n(!0),L(q,null,O(v(d).workflows,o=>(n(),p(f,{key:o.id,cols:"12"},{default:a(()=>[e(w,{rounded:"xl",elevation:"2"},{default:a(()=>[e(R,null,{default:a(()=>[c("div",Q,[c("div",null,[e(C,{class:"text-h6"},{default:a(()=>[i(r(o.title),1)]),_:2},1024),e($,null,{default:a(()=>[i(r(o.objective),1)]),_:2},1024)]),e(G,{color:"primary",variant:"tonal"},{default:a(()=>[i(r(E(o.stage)),1)]),_:2},1024)])]),_:2},1024),e(j),e(S,null,{default:a(()=>[e(x,null,{default:a(()=>[e(f,{cols:"12",md:"6"},{default:a(()=>[t[4]||(t[4]=c("p",{class:"text-caption text-medium-emphasis mb-1"},"Dataset",-1)),c("p",X,r(v(y).datasets.find(u=>u.id===o.datasetId)?.name??"Unknown dataset"),1)]),_:2},1024),e(f,{cols:"12",md:"6"},{default:a(()=>[t[5]||(t[5]=c("p",{class:"text-caption text-medium-emphasis mb-1"},"Notes",-1)),e(D,{modelValue:m[o.id],"onUpdate:modelValue":u=>m[o.id]=u,placeholder:"Experiment summary...",rows:"2",variant:"outlined"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),e(Y,{class:"justify-end ga-2"},{default:a(()=>[e(V,{variant:"text",color:"primary",onClick:u=>B(o.id)},{default:a(()=>[e(g,{start:"",icon:"mdi-content-save"}),t[6]||(t[6]=i(" Save note ",-1))]),_:1},8,["onClick"]),e(V,{variant:"text",color:"error",onClick:u=>v(d).deleteWorkflow(o.id)},{default:a(()=>[e(g,{start:"",icon:"mdi-delete-outline"}),t[7]||(t[7]=i(" Delete ",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(n(),p(K,{key:1,icon:"mdi-flask-outline",title:"No workflows created",text:"Link datasets to experiments and track pipeline stages with notes."},{actions:a(()=>[e(V,{color:"primary",onClick:b},{default:a(()=>[...t[8]||(t[8]=[i("Start workflow",-1)])]),_:1})]),_:1}))]),_:1})]),_:1}))}}),Ve=P(Z,[["__scopeId","data-v-0479c67b"]]);export{Ve as default};
